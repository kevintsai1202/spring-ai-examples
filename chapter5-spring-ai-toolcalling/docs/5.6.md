# 5.6 Function Calling (ä¸Š) - è³¦äºˆ AI æ“ä½œä¸–ç•Œçš„èƒ½åŠ›

> **å°æ‡‰ç¯„ä¾‹**: `chapter5-spring-ai-advanced`
> **é›£åº¦**: â­â­â˜†â˜†â˜†

---

## ğŸ“š æœ¬ç« æ¦‚è¦

Tool Callingï¼ˆå·¥å…·èª¿ç”¨ï¼‰æ˜¯ Spring AI çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œè®“ AI èƒ½å¤ èª¿ç”¨å¤–éƒ¨å‡½æ•¸å’Œå·¥å…·ï¼Œçªç ´è‡ªèº«çŸ¥è­˜é™åˆ¶ã€‚é€™å°±åƒçµ¦ AI è£ä¸Šã€Œå¤–æ›ã€ï¼Œè®“å®ƒèƒ½å¤ åŸ·è¡Œå¯¦éš›æ“ä½œã€ç²å–å³æ™‚è³‡æ–™ã€é€²è¡Œç²¾ç¢ºè¨ˆç®—ã€‚

**å­¸ç¿’ç›®æ¨™**:
- ç†è§£ Tool Calling çš„æ ¸å¿ƒæ¦‚å¿µ
- èªè­˜ AI çš„å›ºæœ‰é™åˆ¶
- å¯¦ç¾ç¬¬ä¸€å€‹ç°¡å–®å·¥å…·
- æŒæ¡ @Tool è¨»è§£åŸºç¤ç”¨æ³•
- å»ºç«‹å®Œæ•´çš„å·¥å…·èª¿ç”¨æµç¨‹

---

## ğŸ¯ AI ç‚ºä»€éº¼éœ€è¦å·¥å…·?

### AI çš„å››å¤§é™åˆ¶

```mermaid
graph TD
    A[AI çš„é™åˆ¶] --> B[çŸ¥è­˜æˆªæ­¢æ—¥æœŸ]
    A --> C[ç„¡æ³•åŸ·è¡Œé‹ç®—]
    A --> D[ç„¡ç‹€æ…‹è¨˜æ†¶]
    A --> E[ç„¡æ³•å­˜å–ç§æœ‰è³‡æ–™]

    B --> F[ä¸çŸ¥é“ä»Šå¤©æ—¥æœŸ]
    B --> G[ä¸çŸ¥é“æœ€æ–°æ–°è]

    C --> H[æ•¸å­¸è¨ˆç®—éŒ¯èª¤]
    C --> I[ç„¡æ³•å‘¼å« API]

    D --> J[ç„¡æ³•è¨˜ä½å°è©±]
    D --> K[éœ€å¤–éƒ¨å„²å­˜]

    E --> L[ä¸çŸ¥ä¼æ¥­è³‡æ–™]
    E --> M[ç„¡æ³•æŸ¥è©¢è³‡æ–™åº«]

    style A fill:#ffcdd2
    style B fill:#fff4e6
    style C fill:#fff4e6
    style D fill:#fff4e6
    style E fill:#fff4e6
```

**1. çŸ¥è­˜æˆªæ­¢å•é¡Œ**
```
ç”¨æˆ¶: "ä»Šå¤©æ˜¯å¹¾è™Ÿï¼Ÿ"
AI (ç„¡å·¥å…·): "æŠ±æ­‰ï¼Œæˆ‘çš„è¨“ç·´è³‡æ–™æˆªè‡³ 2024å¹´1æœˆ..."

ç”¨æˆ¶: "ä»Šå¤©æ˜¯å¹¾è™Ÿï¼Ÿ"
AI (æœ‰å·¥å…·): "ä»Šå¤©æ˜¯ 2024å¹´10æœˆ30æ—¥" âœ…
```

**2. æ•¸å­¸é‹ç®—é™åˆ¶**
```
ç”¨æˆ¶: "è¨ˆç®— 789 Ã— 456"
AI (ç„¡å·¥å…·): "å¤§ç´„æ˜¯ 359,000" âŒ (å¯¦éš›æ˜¯ 359,784)

ç”¨æˆ¶: "è¨ˆç®— 789 Ã— 456"
AI (æœ‰å·¥å…·): "789 Ã— 456 = 359,784" âœ…
```

**3. ç„¡æ³•å­˜å–å³æ™‚è³‡æ–™**
```
ç”¨æˆ¶: "æŸ¥è©¢å°ç©é›»è‚¡åƒ¹"
AI (ç„¡å·¥å…·): "æˆ‘ç„¡æ³•ç²å–å³æ™‚è‚¡åƒ¹è³‡æ–™..."

ç”¨æˆ¶: "æŸ¥è©¢å°ç©é›»è‚¡åƒ¹"
AI (æœ‰å·¥å…·): "å°ç©é›»(2330) ç•¶å‰è‚¡åƒ¹: 580å…ƒ" âœ…
```

### Tool Calling çš„è§£æ±ºæ–¹æ¡ˆ

| AI é™åˆ¶ | Tool Calling è§£æ³• | å¯¦éš›æ‡‰ç”¨ |
|---------|------------------|----------|
| ğŸ“… **ä¸çŸ¥é“æ™‚é–“** | æ™‚é–“æŸ¥è©¢å·¥å…· | æ—¥æœŸã€æ˜ŸæœŸã€æ™‚å€è½‰æ› |
| ğŸ”¢ **è¨ˆç®—ä¸æº–** | è¨ˆç®—å™¨å·¥å…· | æ•¸å­¸é‹ç®—ã€çµ±è¨ˆåˆ†æ |
| ğŸŒ **ç„¡å³æ™‚è³‡æ–™** | API èª¿ç”¨å·¥å…· | å¤©æ°£ã€è‚¡åƒ¹ã€æ–°è |
| ğŸ¢ **ç„¡ä¼æ¥­è³‡æ–™** | è³‡æ–™åº«å·¥å…· | éŠ·å”®è³‡æ–™ã€å®¢æˆ¶è³‡è¨Š |

---

## ğŸ—ï¸ Tool Calling åŸºç¤æ¶æ§‹

### æ ¸å¿ƒæ¦‚å¿µ

```mermaid
graph LR
    A[ç”¨æˆ¶å•é¡Œ] --> B[AI å¤§è…¦]
    B --> C{éœ€è¦å·¥å…·?}

    C -->|ä¸éœ€è¦| D[ç›´æ¥å›ç­”]
    C -->|éœ€è¦| E[é¸æ“‡å·¥å…·]

    E --> F[åŸ·è¡Œå·¥å…·]
    F --> G[ç²å–çµæœ]
    G --> B
    B --> H[æ•´åˆå›ç­”]

    style B fill:#e1f5ff
    style F fill:#fff4e6
    style H fill:#c8e6c9
```

### å·¥ä½œæµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ¶
    participant C as ChatClient
    participant AI as AI æ¨¡å‹
    participant T as Tool

    U->>C: "ç¾åœ¨å¹¾é»ï¼Ÿ"
    C->>AI: å‚³é€å•é¡Œ + å¯ç”¨å·¥å…·åˆ—è¡¨

    rect rgb(255, 244, 230)
    Note over AI: AI æ€è€ƒéç¨‹
    AI->>AI: åˆ†æå•é¡Œ
    AI->>AI: éœ€è¦æ™‚é–“å·¥å…·
    end

    AI-->>C: è«‹èª¿ç”¨ getCurrentTime()
    C->>T: getCurrentTime()
    T-->>C: "2024-10-30 14:30:00"

    C->>AI: å·¥å…·çµæœ
    AI->>AI: æ•´åˆå›ç­”
    AI-->>C: "ç¾åœ¨æ˜¯ 2024å¹´10æœˆ30æ—¥ 14:30"

    C-->>U: æœ€çµ‚å›ç­”
```

**æµç¨‹èªªæ˜**:
1. ç”¨æˆ¶æå•
2. AI åˆ¤æ–·æ˜¯å¦éœ€è¦å·¥å…·
3. é¸æ“‡åˆé©çš„å·¥å…·
4. åŸ·è¡Œå·¥å…·ç²å–çµæœ
5. AI æ•´åˆçµæœç”Ÿæˆå›ç­”

---

## ğŸ’» ç¬¬ä¸€å€‹ Tool - æ™‚é–“æŸ¥è©¢

### æ­¥é©Ÿ 1: å»ºç«‹å·¥å…·é¡åˆ¥

```java
// å°æ‡‰ç¯„ä¾‹: chapter5-spring-ai-advanced/.../tools/DateTimeTools.java:12

@Component
public class DateTimeTools {

    /**
     * ç²å–ç•¶å‰æ™‚é–“
     * æ³¨æ„: description å¿…é ˆç”¨è‹±æ–‡,AI æ‰èƒ½ç†è§£
     */
    @Tool(description = "Get the current date and time in Taiwan (Asia/Taipei timezone)")
    public String getCurrentDateTime() {
        LocalDateTime now = LocalDateTime.now();
        DateTimeFormatter formatter =
            DateTimeFormatter.ofPattern("yyyyå¹´MMæœˆddæ—¥ HH:mm:ss");

        return String.format("ç•¶å‰æ™‚é–“ï¼š%sï¼ˆå°ç£æ™‚é–“ï¼‰",
            now.format(formatter));
    }
}
```

**é—œéµè¦é»**:
1. âœ… ä½¿ç”¨ `@Component` è®“ Spring ç®¡ç†
2. âœ… ä½¿ç”¨ `@Tool` æ¨™è¨˜ç‚ºå¯èª¿ç”¨å·¥å…·
3. âœ… `description` **å¿…é ˆè‹±æ–‡**ï¼ˆAI é€šéæè¿°åˆ¤æ–·æ˜¯å¦ä½¿ç”¨ï¼‰
4. âœ… æ–¹æ³•å¿…é ˆæ˜¯ `public`
5. âœ… è¿”å›å€¼æœƒå‚³çµ¦ AI è™•ç†

### æ­¥é©Ÿ 2: å»ºç«‹ ChatClient

```java
// å°æ‡‰ç¯„ä¾‹: chapter5-spring-ai-advanced/.../controller/SimpleToolController.java:18

@RestController
@RequestMapping("/api/simple-tool")
@RequiredArgsConstructor
public class SimpleToolController {

    private final ChatModel chatModel;
    private final DateTimeTools dateTimeTools;

    /**
     * åŸºç¤å·¥å…·èª¿ç”¨ç¤ºä¾‹
     */
    @GetMapping("/chat")
    public String chat(@RequestParam String message) {

        // å»ºç«‹å¸¶å·¥å…·çš„ ChatClient
        String response = ChatClient.create(chatModel)
                .prompt(message)
                .tools(dateTimeTools)  // è¨»å†Šå·¥å…·
                .call()
                .content();

        return response;
    }
}
```

**å¯¦ç¾è¦é»**:
- `ChatClient.create(chatModel)`: å»ºç«‹å®¢æˆ¶ç«¯
- `.prompt(message)`: è¨­å®šç”¨æˆ¶è¨Šæ¯
- `.tools(dateTimeTools)`: **è¨»å†Šå¯ç”¨å·¥å…·**
- `.call().content()`: åŸ·è¡Œä¸¦ç²å–å›æ‡‰

### æ­¥é©Ÿ 3: æ¸¬è©¦å·¥å…·

**æ¸¬è©¦ 1: è©¢å•æ™‚é–“**
```bash
GET /api/simple-tool/chat?message=ç¾åœ¨å¹¾é»ï¼Ÿ

å›æ‡‰: "ç¾åœ¨æ˜¯ 2024å¹´10æœˆ30æ—¥ 14:30:05ï¼ˆå°ç£æ™‚é–“ï¼‰"
```

**æ¸¬è©¦ 2: ä¸éœ€è¦å·¥å…·çš„å•é¡Œ**
```bash
GET /api/simple-tool/chat?message=ä½ å¥½

å›æ‡‰: "ä½ å¥½ï¼æœ‰ä»€éº¼æˆ‘å¯ä»¥å¹«åŠ©ä½ çš„å—ï¼Ÿ"
```

**æ¸¬è©¦ 3: é–“æ¥éœ€è¦æ™‚é–“çš„å•é¡Œ**
```bash
GET /api/simple-tool/chat?message=ä»Šå¤©æ˜ŸæœŸå¹¾ï¼Ÿ

å›æ‡‰: "ä»Šå¤©æ˜¯ 2024å¹´10æœˆ30æ—¥ï¼ˆå°ç£æ™‚é–“ï¼‰ï¼Œæ˜ŸæœŸä¸‰ã€‚"
```

---

## ğŸ”§ @Tool è¨»è§£è©³è§£

### åŸºæœ¬èªæ³•

```java
@Tool(
    description = "å·¥å…·åŠŸèƒ½çš„è‹±æ–‡æè¿°"  // å¿…å¡«ï¼ŒAI æ“šæ­¤åˆ¤æ–·
)
public ReturnType methodName(åƒæ•¸...) {
    // å·¥å…·é‚è¼¯
    return result;
}
```

### æè¿°çš„é‡è¦æ€§

```java
// âŒ ä¸å¥½çš„æè¿°
@Tool(description = "Get time")
public String getCurrentTime() { ... }

// âœ… å¥½çš„æè¿°
@Tool(description = "Get the current date and time in Taiwan timezone, " +
                    "formatted as 'yyyy-MM-dd HH:mm:ss'")
public String getCurrentTime() { ... }
```

**å¥½æè¿°çš„ç‰¹å¾µ**:
1. âœ… æ¸…æ¥šèªªæ˜åŠŸèƒ½
2. âœ… èªªæ˜åƒæ•¸å«ç¾©ï¼ˆå¦‚æœæœ‰ï¼‰
3. âœ… èªªæ˜è¿”å›å€¼æ ¼å¼
4. âœ… æä¾›ä½¿ç”¨å ´æ™¯

### å¸¶åƒæ•¸çš„å·¥å…·

```java
// å°æ‡‰ç¯„ä¾‹: chapter5-spring-ai-advanced/.../tools/CalculatorTools.java:15

@Component
public class CalculatorTools {

    /**
     * åŸºç¤è¨ˆç®—å™¨
     */
    @Tool(description = "Perform basic math operations. " +
          "Operations: add, subtract, multiply, divide. " +
          "Example: calculate('add', 10, 5) returns 15")
    public String calculate(String operation, double a, double b) {

        double result = switch (operation.toLowerCase()) {
            case "add" -> a + b;
            case "subtract" -> a - b;
            case "multiply" -> a * b;
            case "divide" -> {
                if (b == 0) {
                    yield Double.NaN;
                }
                yield a / b;
            }
            default -> throw new IllegalArgumentException(
                "ä¸æ”¯æ´çš„é‹ç®—: " + operation);
        };

        if (Double.isNaN(result)) {
            return "éŒ¯èª¤ï¼šé™¤æ•¸ä¸èƒ½ç‚ºé›¶";
        }

        return String.format("%.2f %s %.2f = %.2f",
            a, getSymbol(operation), b, result);
    }

    private String getSymbol(String operation) {
        return switch (operation.toLowerCase()) {
            case "add" -> "+";
            case "subtract" -> "-";
            case "multiply" -> "Ã—";
            case "divide" -> "Ã·";
            default -> "?";
        };
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```bash
ç”¨æˆ¶: "è¨ˆç®— 123 åŠ  456"
AI: èª¿ç”¨ calculate("add", 123, 456)
å·¥å…·å›æ‡‰: "123.00 + 456.00 = 579.00"
AI å›æ‡‰: "123 åŠ  456 ç­‰æ–¼ 579"
```

---

## ğŸ¨ å¤šå·¥å…·å”ä½œ

### è¨»å†Šå¤šå€‹å·¥å…·

```java
// å°æ‡‰ç¯„ä¾‹: chapter5-spring-ai-advanced/.../controller/MultiToolController.java:22

@RestController
@RequestMapping("/api/multi-tool")
@RequiredArgsConstructor
public class MultiToolController {

    private final ChatModel chatModel;
    private final DateTimeTools dateTimeTools;
    private final CalculatorTools calculatorTools;

    /**
     * å¤šå·¥å…·æ•´åˆ
     */
    @GetMapping("/chat")
    public String chat(@RequestParam String message) {

        String response = ChatClient.create(chatModel)
                .prompt(message)
                .tools(
                    dateTimeTools,      // æ™‚é–“å·¥å…·
                    calculatorTools     // è¨ˆç®—å·¥å…·
                )
                .call()
                .content();

        return response;
    }
}
```

### æ¸¬è©¦å¤šå·¥å…·å ´æ™¯

**å ´æ™¯ 1: åªéœ€è¦ä¸€å€‹å·¥å…·**
```bash
ç”¨æˆ¶: "ç¾åœ¨å¹¾é»ï¼Ÿ"
AI: åªèª¿ç”¨ dateTimeTools
å›æ‡‰: "ç¾åœ¨æ˜¯ä¸‹åˆ 2:30"
```

**å ´æ™¯ 2: éœ€è¦å¤šå€‹å·¥å…·**
```bash
ç”¨æˆ¶: "ç¾åœ¨æ˜¯ä¸‹åˆ 2:30ï¼Œ3 å°æ™‚å¾Œæ˜¯å¹¾é»ï¼Ÿ"
AI:
1. èª¿ç”¨ dateTimeTools ç²å–ç•¶å‰æ™‚é–“
2. èª¿ç”¨ calculatorTools è¨ˆç®— 14.5 + 3 = 17.5
å›æ‡‰: "3 å°æ™‚å¾Œæ˜¯ä¸‹åˆ 5:30"
```

**å ´æ™¯ 3: ä¸éœ€è¦å·¥å…·**
```bash
ç”¨æˆ¶: "ä½ å¥½å—ï¼Ÿ"
AI: ä¸èª¿ç”¨ä»»ä½•å·¥å…·
å›æ‡‰: "æˆ‘å¾ˆå¥½ï¼Œè¬è¬ï¼æœ‰ä»€éº¼æˆ‘å¯ä»¥å¹«åŠ©ä½ çš„å—ï¼Ÿ"
```

---

## ğŸ’¡ æœ€ä½³å¯¦è¸

### 1. å·¥å…·è¨­è¨ˆåŸå‰‡

```java
// âœ… å¥½çš„å·¥å…·è¨­è¨ˆ
@Tool(description = "Convert temperature between Celsius and Fahrenheit. " +
      "Parameters: temperature (number), unit (C or F)")
public String convertTemperature(double temp, String unit) {
    if (unit.equalsIgnoreCase("C")) {
        double fahrenheit = (temp * 9/5) + 32;
        return String.format("%.1fÂ°C = %.1fÂ°F", temp, fahrenheit);
    } else {
        double celsius = (temp - 32) * 5/9;
        return String.format("%.1fÂ°F = %.1fÂ°C", temp, celsius);
    }
}

// âŒ ä¸å¥½çš„å·¥å…·è¨­è¨ˆ
@Tool(description = "è½‰æ›æº«åº¦")  // âŒ ä¸­æ–‡æè¿°
public Object convert(Map params) {  // âŒ é¡å‹ä¸æ˜ç¢º
    // ...
}
```

### 2. éŒ¯èª¤è™•ç†

```java
@Tool(description = "Get weather information for a city")
public String getWeather(String city) {
    try {
        // æ¨¡æ“¬ API èª¿ç”¨
        if (city == null || city.trim().isEmpty()) {
            return "éŒ¯èª¤ï¼šè«‹æä¾›åŸå¸‚åç¨±";
        }

        // å¯¦éš›æ‡‰ç”¨ä¸­æœƒèª¿ç”¨å¤©æ°£ API
        return String.format("%s çš„å¤©æ°£ï¼šæ™´å¤©ï¼Œæº«åº¦ 25Â°C", city);

    } catch (Exception e) {
        // è¿”å›å‹å–„çš„éŒ¯èª¤è¨Šæ¯ï¼Œè®“ AI èƒ½ç†è§£
        return "ç„¡æ³•ç²å–å¤©æ°£è³‡è¨Šï¼š" + e.getMessage();
    }
}
```

### 3. è¿”å›å€¼æ ¼å¼

```java
// âœ… æ¸…æ™°çš„è¿”å›æ ¼å¼
@Tool(description = "Get current time in specified timezone")
public String getTimeInTimezone(String timezone) {
    try {
        ZoneId zone = ZoneId.of(timezone);
        ZonedDateTime time = ZonedDateTime.now(zone);

        return String.format(
            "æ™‚å€: %s\n" +
            "æ™‚é–“: %s\n" +
            "UTC åç§»: %s",
            timezone,
            time.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")),
            time.getOffset()
        );

    } catch (Exception e) {
        return "ä¸æ”¯æ´çš„æ™‚å€: " + timezone;
    }
}

// âŒ é›£ä»¥ç†è§£çš„è¿”å›
@Tool(description = "Get time")
public long getTime() {
    return System.currentTimeMillis();  // AI é›£ä»¥ç†è§£æ™‚é–“æˆ³
}
```

### 4. åƒæ•¸é©—è­‰

```java
@Tool(description = "Calculate factorial of a number (0-20)")
public String factorial(int n) {
    // åƒæ•¸é©—è­‰
    if (n < 0) {
        return "éŒ¯èª¤ï¼šéšä¹˜ä¸æ”¯æ´è² æ•¸";
    }

    if (n > 20) {
        return "éŒ¯èª¤ï¼šæ•¸å­—å¤ªå¤§ï¼Œè«‹è¼¸å…¥ 0-20 ä¹‹é–“çš„æ•¸å­—";
    }

    // è¨ˆç®—éšä¹˜
    long result = 1;
    for (int i = 2; i <= n; i++) {
        result *= i;
    }

    return String.format("%d! = %d", n, result);
}
```

---

## ğŸ¬ å®Œæ•´ç¤ºä¾‹ï¼šæ™ºèƒ½åŠ©æ‰‹

### æ•´åˆæ™‚é–“å’Œè¨ˆç®—å·¥å…·

```java
// å°æ‡‰ç¯„ä¾‹: chapter5-spring-ai-advanced/.../controller/SmartAssistantController.java:15

@RestController
@RequestMapping("/api/assistant")
@RequiredArgsConstructor
@Slf4j
public class SmartAssistantController {

    private final ChatModel chatModel;
    private final DateTimeTools dateTimeTools;
    private final CalculatorTools calculatorTools;

    /**
     * æ™ºèƒ½åŠ©æ‰‹ API
     */
    @PostMapping("/chat")
    public AssistantResponse chat(@RequestBody AssistantRequest request) {

        log.info("æ”¶åˆ°å•é¡Œ: {}", request.getMessage());

        long startTime = System.currentTimeMillis();

        String response = ChatClient.create(chatModel)
                .prompt(request.getMessage())
                .tools(dateTimeTools, calculatorTools)
                .call()
                .content();

        long executionTime = System.currentTimeMillis() - startTime;

        log.info("å›æ‡‰å®Œæˆï¼Œè€—æ™‚: {}ms", executionTime);

        return AssistantResponse.builder()
                .success(true)
                .question(request.getMessage())
                .answer(response)
                .executionTime(executionTime)
                .timestamp(LocalDateTime.now())
                .build();
    }
}
```

### æ¸¬è©¦å°è©±

**å°è©± 1: æ™‚é–“ç›¸é—œ**
```
ç”¨æˆ¶: "ç¾åœ¨å¹¾é»ï¼Ÿæ˜å¤©é€™å€‹æ™‚å€™æ˜¯å¹¾è™Ÿï¼Ÿ"
åŠ©æ‰‹: "ç¾åœ¨æ˜¯ 2024å¹´10æœˆ30æ—¥ 14:30ï¼Œ
      æ˜å¤©é€™å€‹æ™‚å€™æ˜¯ 2024å¹´10æœˆ31æ—¥ 14:30ã€‚"
```

**å°è©± 2: è¨ˆç®—ç›¸é—œ**
```
ç”¨æˆ¶: "å¦‚æœæˆ‘æœ‰ 1000 å…ƒï¼Œè²· 3 å€‹ 250 å…ƒçš„å•†å“ï¼Œé‚„å‰©å¤šå°‘ï¼Ÿ"
åŠ©æ‰‹: "3 å€‹ 250 å…ƒçš„å•†å“ç¸½å…±æ˜¯ 750 å…ƒï¼ˆ250 Ã— 3 = 750ï¼‰ï¼Œ
      1000 å…ƒæ¸›å» 750 å…ƒï¼Œé‚„å‰© 250 å…ƒã€‚"
```

**å°è©± 3: æ··åˆå ´æ™¯**
```
ç”¨æˆ¶: "æˆ‘æ¯å¤©å·¥ä½œ 8 å°æ™‚ï¼Œä¸€é€± 5 å¤©ï¼Œä¸€å€‹æœˆå·¥ä½œå¤šå°‘å°æ™‚ï¼Ÿ"
åŠ©æ‰‹: "ä¸€é€±å·¥ä½œ 40 å°æ™‚ï¼ˆ8 Ã— 5 = 40ï¼‰ï¼Œ
      ä¸€å€‹æœˆæŒ‰ 4 é€±è¨ˆç®—ï¼Œç´„å·¥ä½œ 160 å°æ™‚ï¼ˆ40 Ã— 4 = 160ï¼‰ã€‚"
```

---

## ğŸ“ é‡é»å›é¡§

### Tool Calling çš„åƒ¹å€¼
âœ… **çªç ´é™åˆ¶**: AI èƒ½ç²å–å³æ™‚è³‡æ–™
âœ… **ç²¾ç¢ºè¨ˆç®—**: é¿å…æ•¸å­¸éŒ¯èª¤
âœ… **å¯¦éš›æ“ä½œ**: èª¿ç”¨ APIã€æŸ¥è©¢è³‡æ–™åº«
âœ… **éˆæ´»æ“´å±•**: è¼•é¬†æ·»åŠ æ–°åŠŸèƒ½

### æŠ€è¡“è¦é»
- **@Tool è¨»è§£**: æ¨™è¨˜å¯èª¿ç”¨çš„å·¥å…·æ–¹æ³•
- **æè¿°å¿…é ˆè‹±æ–‡**: AI æ ¹æ“šæè¿°åˆ¤æ–·ç”¨é€”
- **æ¸…æ™°çš„è¿”å›å€¼**: è®“ AI èƒ½ç†è§£çµæœ
- **éŒ¯èª¤è™•ç†**: è¿”å›å‹å–„çš„éŒ¯èª¤è¨Šæ¯

### å¯¦ç¾æ­¥é©Ÿ
1. å»ºç«‹å·¥å…·é¡åˆ¥ï¼ˆ@Componentï¼‰
2. ä½¿ç”¨ @Tool æ¨™è¨˜æ–¹æ³•
3. åœ¨ ChatClient ä¸­è¨»å†Šå·¥å…·
4. æ¸¬è©¦ä¸åŒå ´æ™¯

---

## ğŸš€ ä¸‹ä¸€æ­¥

å®Œæˆæœ¬ç¯€å¾Œï¼Œæ‚¨å·²ç¶“æŒæ¡äº† Function Calling çš„åŸºç¤ç”¨æ³•ã€‚æ¥ä¸‹ä¾†éœ€è¦æ·±å…¥å­¸ç¿’é€²éšæŠ€å·§ï¼š

**ä¼æ¥­ç´šå·¥å…·é–‹ç™¼**
- å­¸ç¿’é–‹ç™¼è¤‡é›œçš„ä¼æ¥­ç´šå·¥å…·å‡½æ•¸
- æŒæ¡å·¥å…·çš„åƒæ•¸é©—è­‰å’ŒéŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- ç†è§£å¦‚ä½•æ•´åˆè³‡æ–™åº«ã€å¤–éƒ¨ API ç­‰å¾Œç«¯æœå‹™
- å­¸ç¿’å¯¦ä½œéœ€è¦æ¬Šé™æ§åˆ¶çš„å·¥å…·å‡½æ•¸
- æŒæ¡å·¥å…·åŸ·è¡Œçš„ç›£æ§ã€æ—¥èªŒå’Œè¿½è¹¤

**å·¥å…·éˆç®¡ç†èˆ‡å”ä½œ**
- å­¸ç¿’ç®¡ç†å¤šå€‹å·¥å…·çš„è¨»å†Šå’Œç”Ÿå‘½é€±æœŸ
- æŒæ¡å·¥å…·ä¹‹é–“çš„ä¾è³´é—œä¿‚å’ŒåŸ·è¡Œé †åº
- ç†è§£å¦‚ä½•è¨­è¨ˆå·¥å…·éˆè§£æ±ºè¤‡é›œä»»å‹™
- å­¸ç¿’å¯¦ä½œå·¥å…·çš„å‹•æ…‹è¼‰å…¥å’Œç†±æ›´æ–°
- æŒæ¡å·¥å…·ç‰ˆæœ¬ç®¡ç†å’Œç›¸å®¹æ€§è™•ç†

é€™äº›é€²éšæŠ€è¡“å°‡è®“æ‚¨èƒ½å¤ å»ºç«‹åŠŸèƒ½å¼·å¤§çš„ AI æ™ºèƒ½åŠ©æ‰‹ç³»çµ±ã€‚

---

**åƒè€ƒè³‡æ–™**:
- [Spring AI Tool Calling](https://docs.spring.io/spring-ai/reference/api/functions.html)
- [OpenAI Function Calling Guide](https://platform.openai.com/docs/guides/function-calling)
- [Tool Calling Best Practices](https://docs.spring.io/spring-ai/reference/concepts.html)
